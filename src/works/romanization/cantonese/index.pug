extend /_layout.pug

mixin toTds(xs)
  for x in xs
    td
      if x && x[0] === "!"
        em= x.substring(1)
      else
        | #{x}

mixin toTrs(xss, sep="|")
  for xs in xss
    tr
      +toTds(xs.split(sep))

mixin sups(xs, sep, mid, end)
  for x, i in xs
    - let [a, b] = x.split(sep)
    if i !== 0
      | #{mid}
    | #{a}
    sup= b
  | #{end}

block head
  - const title = "cantonese"
  link(rel="stylesheet", href="../style.css")
  link(rel="stylesheet", href="style.css")
  script(src="convert.js")
  script(src="script.js")

block main
  +mySection("example")
    center
      table.example
        tbody
          tr: th original
          tr: td æ˜¥æ›‰ï¼ˆå­Ÿæµ©ç„¶ï¼‰
          tr: td æ˜¥çœ ä¸è¦ºæ›‰ï¼Œ
          tr: td è™•è™•èå•¼é³¥ã€‚
          tr: td å¤œä¾†é¢¨é›¨è²ï¼Œ
          tr: td èŠ±è½çŸ¥å¤šå°‘ï¼Ÿ
        tbody.cantonese-pinyin
          tr: th cantonese pinyin
          tr: td
            +sups("tsoen^1 hiu^2".split(" "), "^", " ", "")
            |  (
            +sups("maang^6 hou^6 jin^4".split(" "), "^", " ", "")
            | )
          tr: td: +sups("tsoen^1 min^4 bat^7 gok^8 hiu^2".split(" "), "^", " ", ",")
          tr: td: +sups("tsy^3 tsy^3 man^4 tai^4 niu^5".split(" "), "^", " ", ".")
          tr: td: +sups("je^6 loi^4 fung^1 jy^5 sing^1".split(" "), "^", " ", ",")
          tr: td: +sups("faa^1 lok^9 dzi^1 do^1 siu^2".split(" "), "^", " ", "?")
        tbody.jyutping
          tr: th jyutping
          tr: td
            +sups("ceon^1 hiu^2".split(" "), "^", " ", "")
            |  (
            +sups("maang^6 hou^6 jin^4".split(" "), "^", " ", "")
            | )
          tr: td: +sups("ceon^1 min^4 bat^1 gok^3 hiu^2".split(" "), "^", " ", ",")
          tr: td: +sups("cyu^3 cyu^3 man^4 tai^4 niu^5".split(" "), "^", " ", ".")
          tr: td: +sups("je^6 loi^4 fung^1 jyu^5 sing^1".split(" "), "^", " ", ",")
          tr: td: +sups("faa^1 lok^6 zi^1 do^1 siu^2".split(" "), "^", " ", "?")
        tbody.author
          tr: th #{author.name}
        tbody.author-ascii
          tr: th #{author.name}-ASCII
        tbody.author-alphabet
          tr: th #{author.name}-alphabet

  +mySection("tables")
    center
      table
        caption IPA
        tbody.consonant
          +toTrs(
            [ "p  |pÊ° |m |f | "
            , "t\u0361s|t\u0361sÊ°||s|j"
            , "t  |tÊ° |n |  |l"
            , "kÊ· |kÊ·Ê°|  |  |w"
            , "k  |kÊ° |Å‹ |h | "
            , "Ê”"
            ]
          )
        tbody.vowel
          +toTrs([
          "iË|   |iËu|iËm|iËn|!ÉªÅ‹|iËp|iËt|!Éªk ",
          "yË|   |   |   |yËn|   |   |yËt|    ",
          "uË|uËi|   |   |uËn|!ÊŠÅ‹|   |uËt|!ÊŠk",
          "É›Ë|!ei|É›Ëu|É›Ëm|É›Ën|É›ËÅ‹|É›Ëp|   |É›Ëk ",
          "Å“Ë|!Éµy|   |   |!Éµn|Å“ËÅ‹|   |!Éµt|Å“Ëk",
          "É”Ë|É”Ëy|!ou|   |É”Ën|É”ËÅ‹|   |É”Ët|É”Ëk",
          "aË|aËi|aËu|aËm|aËn|aËÅ‹|aËp|aËt|aËk",
          "  | Éi| Éu| Ém| Én| ÉÅ‹| Ép| Ét| Ék",
          "  |   |   |  m|   |  Å‹|   |   |   "
          ])

      table#cantonese-me
        caption #{author.name}

      table#cantonese-pinyin
        caption æ•™è‚²å­¸é™¢æ‹¼éŸ³æ–¹æ¡ˆ (cantonese pinyin)
        tbody.consonant
          +toTrs(
            [ "b |p |m |f| "
            , "d |t |n | |l"
            , "g |k |ng|h| "
            , "gw|kw|  | |w"
            , "dz|ts|  |s|j"
            , "âˆ…"
            ]
          )
        tbody.vowel
          +toTrs([
          "i |   |iu |im |in |ing |ip |it |ik ",
          "y |   |   |   |yn |    |   |yt |   ",
          "u |ui |   |   |un |ung |   |ut |uk ",
          "e |ei |eu |em |en |eng |ep |   |ek ",
          "oe|oey|   |   |oen|oeng|   |oet|oek",
          "o |oi |ou |   |on |ong |   |ot |ok ",
          "aa|aai|aau|aam|aan|aang|aap|aat|aak",
          "  |ai |au |am |an |ang |ap |at |ak ",
          "  |   |   |  m|   |  ng|   |   |   "
          ])

      table
        caption é¦™æ¸¯èªè¨€å­¸å­¸æœƒç²µèªæ‹¼éŸ³æ–¹æ¡ˆ (jyutping)
        tbody.consonant
          +toTrs(
            [ "b |p |m |f| "
            , "d |t |n | |l"
            , "g |k |ng|h| "
            , "gw|kw|  | |w"
            , "z |c |s | |j"
            , "âˆ…"
          ])
        tbody.vowel
          +toTrs([
            "i |   |iu |im |in |ing |ip |it |ik ",
            "yu|   |   |   |yun|    |   |yut|   ",
            "u |ui |   |   |un |ung |   |ut |uk ",
            "e |ei |eu |em |en |eng |ep |   |ek ",
            "oe|eoi|   |   |eon|oeng|   |eot|oek",
            "o |oi |ou |   |on |ong |   |ot |ok ",
            "aa|aai|aau|aam|aan|aang|aap|aat|aak",
            "  |ai |au |am |an |ang |ap |at |ak ",
            "  |   |   |  m|   |  ng|   |   |   "
          ])

      table
        caption tones
        tbody.tone
          for xs in ["é™°å¹³|é™°ä¸Š|é™°å»|é™½å¹³|é™½ä¸Š|é™½å»|ä¸Šé™°å…¥|ä¸‹é™°å…¥|é™½å…¥", "çµ²|å²|è©¦|æ™‚|å¸‚|å£«|å¼|éŒ«|é£Ÿ"]
            tr
              td
              for x in xs.split("|")
                th= x
          -
            let xss =
              [ ["cantonese pinyin", " 1| 2| 3| 4| 5| 6| 7| 8| 9"]
              , ["jyutping        ", " 1| 2| 3| 4| 5| 6| 1| 3| 6"]
              , ["IPA-letter",       "Ë¥Ë§|Ë§Ë¥| Ë§|Ë§Ë©|Ë©Ë§| Ë©| Ë¥| Ë§| Ë©"]
              , ["IPA-diacritic",    "i\u0302|i\u030C|i|i\u1DC6|i\u1DC5|i\u0300|i\u0301|i|i\u0300"]
              , [`${author.name}-diacritic`,                               ]
              , [`${author.name}-ASCII`,                                   ]
              , [`${author.name}-alphabet`,    "ğ¶ğ‘£ğ‘|ğ‘ğ‘‰ğ¶|ğ‘ğ‘£ğ‘|ğ¶ğ‘£ğ‘x|ğ‘ğ‘‰ğ¶x|ğ‘ğ‘£ğ‘x|ğ¶ğ‘‰ğ‘|ğ‘ğ‘£ğ‘|ğ‘ğ‘£ğ‘x"]
              ]
          for xs in xss
            tr
              th(align="right")= xs[0]
              if xs[1]
                +toTds(xs[1].split("|"))

    ul
      li you may omit breves above â€¹i, u, e, Ã¸â€º.
      li bassically do not use zero-initial â€¹xâ€º
      li
        | in ASCII environments
        ul
          li use â€¹q, wâ€º instead of â€¹Å‹, Ã¸â€º
          li use ASCII symbols for tone
      li
        | in alphabet-only environments
        ul
          li use â€¹xâ€º as zero-initial
          li double nasal nuclei
          li use uppercase letters and â€¹xâ€º (not zero-initial) for tone
          li double codas after short vowels.

  +mySection("converter")
    div.converter
      div.center
        ul.option
          li
            input.trigger(type="checkbox", name="letter")
            label â€¹Å‹, Ã¸â€ºâ†’â€¹q, wâ€º (ASCII mode)
          li
            input.trigger(type="checkbox", name="alphabet")
            label â€¹<span class=cantonese>a</span>Câ€ºâ†’â€¹aCCâ€º (alphabet mode)
          li
            select.trigger(name="tone", size="1")
              option(value="none") none
              option(value="number") number
              option(value="ipa") IPA
              option(value="diacritic", selected) diacritic
              option(value="ascii") ASCII
              option(value="alphabet") alphabet
            label tone
          li
            input.trigger(type="checkbox", name="omit-length")
            label omit optional vowel length
          li
            input.trigger(type="checkbox", name="ruby")
            label show as ruby

      div.from-to
        textarea(placeholder="cantonese pinyin / jyutping / æ¼¢å­—").from.trigger
          | äººç”Ÿè‡ªå¤èª°ç„¡æ­»ï¼Ÿ
        div.to

      div.center
        a.tweet(
          href=""
          , onClick="window.open(encodeURI(decodeURI(this.href)), 'tweetwindow', 'width=650, height=470, personalbar=0, toolbar=0, scrollbars=1, sizable=1'); return false;"
          , rel="nofollow"
          , class="twitter-link"
          ) tweet

    p: em
      | this program uses&#x20;
      a(href="https://github.com/lshk-org/jyutping-table") é›»è…¦ç”¨æ¼¢å­—ç²µèªæ‹¼éŸ³è¡¨
      |  licensed under&#x20;
      a(href="https://creativecommons.org/licenses/by/4.0/deed.en") CC BY 4.0
      | .

  +mySection("influeces")
    p
      | influenced by
      ul
        li jyutpin (distinguishes [Å“Ë, Éµ] and uses not â€¹dz, tsâ€º but just â€¹z, câ€º for /dz, ts/)
        li cantonese pinyin (uses not â€¹yuâ€º but just â€¹yâ€º for /y/)
        li eulwjbaq (uses â€¹q, wâ€º for /Å‹, Ã¸/)
        li latin (uses not â€¹wâ€º but â€¹vâ€º for /w/)
        li various languages (double consonants to indicate short vowels)

  +mySection("åƒå­—æ–‡")
    p: em the text below is automatically generated and therefore has some inaccurate rubies especially for characters which have multiple sounds.

    div.center
      include _cinzimann.pug