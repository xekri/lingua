extend /_layout.pug

mixin toTds(xs)
  for x in xs
    td
      if x && x[0] === "!"
        em= x.substring(1)
      else
        | #{x}


mixin toTrs(xss, sep="|")
  for xs in xss
    tr
      +toTds(xs.split(sep))


mixin sups(xs, sep, mid, end)
  for x, i in xs
    - let [a, b] = x.split(sep)
    if i !== 0
      | #{mid}
    | #{a}
    sup= b
  | #{end}

block head
  - var title = "orthography"
  link(rel="stylesheet", href="style.css")
  script(src="script.js")
  script(src="cantonese-convert.js")

block main
  p
    | the author
    ul
      li designed the systems below just to suit vis preference or aethetics
      li claims no exclusive orthodoxy of them
      li forces no one to use them
      li may make incompatible changes in them.
    | if some one however would like and try to use them, the author would be very glad.

  // +mySection("japanese")
    p: em the author have not finished this section yet.
    center
      table
        caption example
        tbody

      table
        tbody
          tr
            td
            td.over-th(colspan="5") vowel
            td.over-th(colspan="15") consonant
            td N
            td Q
          tr
            td
            for x in Array.from("ã‚¢ã‚¤ã‚¦ğ›€€ã‚ªã‚¢ã‚«ã‚¬ã‚µã‚¶ã‚¿ãƒ€ãƒŠãƒãƒãƒ‘ãƒãƒ¤ãƒ©ãƒ¯ãƒ³ãƒƒ")
              th= x
          tr
            th= global.name
            for x in "a|i, Ä©|u, Å©|e|o|h|c|g|s|z|t|d|n|f|b|p|m|j|r|v|Å‹, n, m|x, c, t, f".split("|")
              td= x


  +mySection("cantonese")
    p
      | i introduce yet another pinyin system for cantonese.
      | it is consistent and compact,
      |  though it may seem complex at zeroth glance.
      | the system has an ASCII version in addition to an original Unicode one, so that we can use it every where.

    center
      table.example
        caption example
        tbody
          tr
            td
            th sumi
            th sumi-ASCII
            th cantonese<br/>pinyin
            th jyutping
          tr
            td æ˜¥æ›‰<br/>ï¼ˆå­Ÿæµ©ç„¶ï¼‰
            td.cantonese-example
            td.cantonese-example-ascii
            td
              +sups("tsoen^1 hiu^2".split(" "), "^", " ", "")
              | <br/>(
              +sups("maang^6 hou^6 jin^4".split(" "), "^", " ", "")
              | )
            td
              +sups("ceon^1 hiu^2".split(" "), "^", " ", "")
              | <br/>(
              +sups("maang^6 hou^6 jin^4".split(" "), "^", " ", "")
              | )
          tr
            td æ˜¥çœ ä¸è¦ºæ›‰ï¼Œ
            td.cantonese-example
            td.cantonese-example-ascii
            td: +sups("tsoen^1 min^4 bat^7 gok^8 hiu^2".split(" "), "^", " ", ",")
            td: +sups("ceon^1 min^4 bat^1 gok^3 hiu^2".split(" "), "^", " ", ",")
          tr
            td è™•è™•èå•¼é³¥ã€‚
            td.cantonese-example
            td.cantonese-example-ascii
            td: +sups("tsy^3 tsy^3 man^4 tai^4 niu^5".split(" "), "^", " ", ".")
            td: +sups("cyu^3 cyu^3 man^4 tai^4 niu^5".split(" "), "^", " ", ".")
          tr
            td å¤œä¾†é¢¨é›¨è²ï¼Œ
            td.cantonese-example
            td.cantonese-example-ascii
            td: +sups("je^6 loi^4 fung^1 jy^5 sing^1".split(" "), "^", " ", ",")
            td: +sups("je^6 loi^4 fung^1 jyu^5 sing^1".split(" "), "^", " ", ",")
          tr
            td èŠ±è½çŸ¥å¤šå°‘ï¼Ÿ
            td.cantonese-example
            td.cantonese-example-ascii
            td: +sups("faa^1 lok^9 dzi^1 do^1 siu^2".split(" "), "^", " ", "?")
            td: +sups("faa^1 lok^6 zi^1 do^1 siu^2".split(" "), "^", " ", "?")

      //
        table
          caption sound
          tr
            td p
            td
            td m
            td f
          tr
            td t
            td tÊ°
            td n
            td l
          tr
            td k
            td kÊ°
            td Å‹
            td h
          tr
            td kÊ·
            td kÊ·Ê°
            td w
          tr
            td ts
            td tsÊ°
            td s
            td j

    center
      table
        caption IPA
        tbody.consonant
          +toTrs([
            "p  |pÊ° |m |f",
            "t  |tÊ° |n |l",
            "k  |kÊ° |Å‹ |h",
            "kÊ· |kÊ·Ê°|  |w",
            "t\u0361s|t\u0361sÊ°|s|j"
          ])
        tbody.vowel
          +toTrs([
          "iË|   |iËu|iËm|iËn|!ÉªÅ‹|iËp|iËt|!Éªk ",
          "yË|   |   |   |yËn|   |   |yËt|    ",
          "uË|uËi|   |   |uËn|!ÊŠÅ‹|   |uËt|!ÊŠk",
          "É›Ë|!ei|É›Ëu|É›Ëm|É›Ën|É›ËÅ‹|É›Ëp|   |É›Ëk ",
          "Å“Ë|!Éµy|   |   |!Éµn|Å“ËÅ‹|   |!Éµt|Å“Ëk",
          "É”Ë|É”Ëy|!ou|   |É”Ën|É”ËÅ‹|   |É”Ët|É”Ëk",
          "aË|aËi|aËu|aËm|aËn|aËÅ‹|aËp|aËt|aËk",
          "  | Éi| Éu| Ém| Én| ÉÅ‹| Ép| Ét| Ék",
          "  |   |   |  m|   |  Å‹|   |   |   "
          ])

      table#cantonese-me
        caption sumi

      table#cantonese-me-ascii
        caption sumi-ASCII

      table#cantonese-pinyin
        caption æ•™è‚²å­¸é™¢æ‹¼éŸ³æ–¹æ¡ˆ (cantonese pinyin)
        tbody.consonant
          +toTrs([
            "b |p |m |f",
            "d |t |n |l",
            "g |k |ng|h",
            "gw|kw|  |w",
            "dz|ts|s |j"
          ])
        tbody.vowel
          +toTrs([
          "i |   |iu |im |in |ing |ip |it |ik ",
          "y |   |   |   |yn |    |   |yt |   ",
          "u |ui |   |   |un |ung |   |ut |uk ",
          "e |ei |eu |em |en |eng |ep |   |ek ",
          "oe|oey|   |   |oen|oeng|   |oet|oek",
          "o |oi |ou |   |on |ong |   |ot |ok ",
          "aa|aai|aau|aam|aan|aang|aap|aat|aak",
          "  |ai |au |am |an |ang |ap |at |ak ",
          "  |   |   |  m|   |  ng|   |   |   "
          ])

      table
        caption é¦™æ¸¯èªè¨€å­¸å­¸æœƒç²µèªæ‹¼éŸ³æ–¹æ¡ˆ (jyutping)
        tbody.consonant
          +toTrs([
            "b |p |m |f",
            "d |t |n |l",
            "g |k |ng|h",
            "gw|kw|  |w",
            "z |c |s |j"
          ])
        tbody.vowel
          +toTrs([
            "i |   |iu |im |in |ing |ip |it |ik ",
            "yu|   |   |   |yun|    |   |yut|   ",
            "u |ui |   |   |un |ung |   |ut |uk ",
            "e |ei |eu |em |en |eng |ep |   |ek ",
            "oe|eoi|   |   |eon|oeng|   |eot|oek",
            "o |oi |ou |   |on |ong |   |ot |ok ",
            "aa|aai|aau|aam|aan|aang|aap|aat|aak",
            "  |ai |au |am |an |ang |ap |at |ak ",
            "  |   |   |  m|   |  ng|   |   |   "
          ])

      table
        caption tones
        tbody.tone#cantonese-tone
          tr
            td
            for x in "çµ²|å²|è©¦|æ™‚|å¸‚|å£«|å¼|éŒ«|é£Ÿ".split("|")
              th= x
          -
            let xss = [
              ["",                 "é™°å¹³|é™°ä¸Š|é™°å»|é™½å¹³|é™½ä¸Š|é™½å»|ä¸Šé™°å…¥|ä¸‹é™°å…¥|é™½å…¥"],
              //["",                 "53|35|33|21|23|22| 5| 3| 2"],
              ["IPA",              "Ë¥Ë§|Ë§Ë¥| Ë§|Ë§Ë©|Ë©Ë§| Ë©| Ë¥| Ë§| Ë©"],
              ["sumi",                                         ],
              ["sumi-ASCII",                                   ],
              ["cantonese pinyin", " 1| 2| 3| 4| 5| 6| 7| 8| 9"],
              ["jyutping        ", " 1| 2| 3| 4| 5| 6| 1| 3| 6"]
            ]
          for xs in xss
            tr
              th= xs[0]
              if xs[1]
                +toTds(xs[1].split("|"))

    p
      | we may
      ul
        li replace any tone diacritic with a nummeral as in cantonese pinyin
        li omit any non-tone diacritic except of â€¹<span class="cantonese-short">a</span>â€º

    +mySection("design choices")
      p
        | the author wanted to distinguish any phonological difference.
        |  the system distinguishes [Å“Ë, Éµ] like jyutping â€¹oe, eoâ€º, not like cantonese pinyin â€¹oeâ€º.
        |  the system also distinguishes lengths of the other vowels, which is useful for beginners,
        |  while left optional as they have no ambiguity and is not necessary for natives, except for [aË, É].
      p
        | the author tried to make the system minimal.
        |  the system adopts cantonese pinyin â€¹yâ€º, not jyutping â€¹yuâ€º,
        |  and adopts jyutping â€¹z, câ€º, not cantonese pinyin â€¹dz, tsâ€º.
        |  the system uses many diacritics in order to avoid numerals and doubled letters, which are ugly in the autohr's opinion,
        |  while providing the ASCII alternative easy to type.
      p
        | the system replaces jyutping â€¹wâ€º with â€¹vâ€º,
        |  as â€¹vâ€º is the primitive latin letter for [w] sound and cantonese does not need to distinguish [w, v].
        |  the author does not like digraphs like â€¹ng, oeâ€º, which breaks uniformity.
        |  as we have â€¹q, wâ€º unused, we can avoid them.
    +mySection("converter")
      div.converter
        center
          ul.option
            li
              input.trigger(type="checkbox", name="letter")
              label use â€¹q, w, 'â€º instead of â€¹Å‹, Ã¸, &#x02BC;â€º
            li
              select.trigger(name="tone", size="1")
                option(value="none") none
                option(value="diacritic", selected) diacritic
                option(value="number") number
                option(value="ascii") ASCII
                option(value="ipa") IPA
              label tone
            li
              input.trigger(type="checkbox", name="length", checked)
              label show optional vowel length

        div.from-to
          div.from
            label cantonese pinyin
            textarea.trigger
              | è¨˜ä½ä½ æœƒæ­»äº¡ã€‚
              | gei3dzy6 nei5 wui2 sei2mong4.
          div.to
            label sumi
            div

      center: a.tweet(
        href=""
        , onClick="window.open(encodeURI(decodeURI(this.href)), 'tweetwindow', 'width=650, height=470, personalbar=0, toolbar=0, scrollbars=1, sizable=1'); return false;"
        , rel="nofollow"
        , class="twitter-link"
        ) tweet
